<mat-card-header>
  <mat-card-title class="text-uppercase">Cambiar contraseña</mat-card-title>
</mat-card-header>

<mat-card-content>
  <form [formGroup]="changePasswordForm" (ngSubmit)="accept()">
    <!-- Contraseña actual -->
    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Contraseña actual</mat-label>
      <input matInput formControlName="currentPassword"
             [type]="hideCurrentPassword ? 'password' : 'text'">
      <button mat-icon-button matSuffix type="button"
              (click)="hideCurrentPassword = !hideCurrentPassword"
              aria-label="Toggle password visibility">
        <mat-icon>{{ hideCurrentPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      <mat-error *ngIf="changePasswordForm.get('currentPassword')?.hasError('required')">
        La contraseña actual es requerida
      </mat-error>
    </mat-form-field>

    <!-- Nueva contraseña -->
    <mat-form-field appearance="outline" class="w-100 mt-2">
      <mat-label>Nueva contraseña</mat-label>
      <input matInput formControlName="newPassword"
             [type]="hideNewPassword ? 'password' : 'text'">
      <button mat-icon-button matSuffix type="button"
              (click)="hideNewPassword = !hideNewPassword"
              aria-label="Toggle password visibility">
        <mat-icon>{{ hideNewPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      <mat-error *ngIf="changePasswordForm.get('newPassword')?.hasError('required')">
        La nueva contraseña es requerida
      </mat-error>
    </mat-form-field>

    <!-- Confirmar nueva contraseña -->
    <mat-form-field appearance="outline" class="w-100 mt-2">
      <mat-label>Confirmar nueva contraseña</mat-label>
      <input matInput formControlName="confirmPassword"
             [type]="hideConfirmPassword ? 'password' : 'text'">
      <button mat-icon-button matSuffix type="button"
              (click)="hideConfirmPassword = !hideConfirmPassword"
              aria-label="Toggle password visibility">
        <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      <mat-error *ngIf="changePasswordForm.hasError('mismatch')">
        Las contraseñas no coinciden
      </mat-error>
    </mat-form-field>

    <div class="d-flex justify-content-center pt-5">
      <button
      class="btn-with-icon btn btn-primary"
      type="submit"
      [disabled]="!changePasswordForm.valid">
        <mat-icon>lock_reset</mat-icon>
        Cambiar contraseña
      </button>
    </div>
  </form>
</mat-card-content>
